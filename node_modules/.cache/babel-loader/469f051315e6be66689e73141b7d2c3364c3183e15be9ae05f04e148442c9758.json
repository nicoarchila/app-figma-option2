{"ast":null,"code":"import _regeneratorRuntime from \"/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport { __awaiter as e } from \"tslib\";\nimport { Hub as s, DataStore as t } from \"aws-amplify\";\nimport { UI_CHANNEL as i, ACTION_DATASTORE_UPDATE_STARTED as o, EVENT_ACTION_DATASTORE_UPDATE as r, DATASTORE_QUERY_BY_ID_ERROR as d, ACTION_DATASTORE_UPDATE_FINISHED as m } from \"./constants.mjs\";\nimport { getErrorMessage as a } from \"../../helpers/utils.mjs\";\nimport { AMPLIFY_SYMBOL as n } from \"../../helpers/constants.mjs\";\nimport { useTypeCastFields as c } from \"./shared/useTypeCastFields.mjs\";\nvar f = function f(_ref) {\n  var f = _ref.fields,\n    l = _ref.id,\n    p = _ref.model,\n    h = _ref.schema;\n  var v = c({\n    fields: f,\n    modelName: p.name,\n    schema: h\n  });\n  return function () {\n    return e(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      var _e, _a;\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            s.dispatch(i, {\n              event: o,\n              data: {\n                fields: v,\n                id: l\n              }\n            }, r, n);\n            _context.next = 4;\n            return t.query(p, l);\n          case 4:\n            _e = _context.sent;\n            if (_e) {\n              _context.next = 7;\n              break;\n            }\n            throw new Error(\"\".concat(d, \": \").concat(l));\n          case 7:\n            _context.next = 9;\n            return t.save(p.copyOf(_e, function (e) {\n              Object.assign(e, v);\n            }));\n          case 9:\n            _a = _context.sent;\n            s.dispatch(i, {\n              event: m,\n              data: {\n                fields: v,\n                id: l,\n                item: _a\n              }\n            }, r, n);\n            _context.next = 16;\n            break;\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](0);\n            s.dispatch(i, {\n              event: m,\n              data: {\n                fields: v,\n                id: l,\n                errorMessage: a(_context.t0)\n              }\n            }, r, n);\n          case 16:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 13]]);\n    }));\n  };\n};\nexport { f as useDataStoreUpdateAction };","map":{"version":3,"names":["__awaiter","e","Hub","s","DataStore","t","UI_CHANNEL","i","ACTION_DATASTORE_UPDATE_STARTED","o","EVENT_ACTION_DATASTORE_UPDATE","r","DATASTORE_QUERY_BY_ID_ERROR","d","ACTION_DATASTORE_UPDATE_FINISHED","m","getErrorMessage","a","AMPLIFY_SYMBOL","n","useTypeCastFields","c","f","_ref","fields","l","id","p","model","h","schema","v","modelName","name","_regeneratorRuntime","mark","_callee","_e","_a","wrap","_callee$","_context","prev","next","dispatch","event","data","query","sent","Error","concat","save","copyOf","Object","assign","item","t0","errorMessage","stop","useDataStoreUpdateAction"],"sources":["/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@aws-amplify/ui-react/dist/esm/hooks/actions/useDataStoreUpdateAction.mjs"],"sourcesContent":["import{__awaiter as e}from\"tslib\";import{Hub as s,DataStore as t}from\"aws-amplify\";import{UI_CHANNEL as i,ACTION_DATASTORE_UPDATE_STARTED as o,EVENT_ACTION_DATASTORE_UPDATE as r,DATASTORE_QUERY_BY_ID_ERROR as d,ACTION_DATASTORE_UPDATE_FINISHED as m}from\"./constants.mjs\";import{getErrorMessage as a}from\"../../helpers/utils.mjs\";import{AMPLIFY_SYMBOL as n}from\"../../helpers/constants.mjs\";import{useTypeCastFields as c}from\"./shared/useTypeCastFields.mjs\";const f=({fields:f,id:l,model:p,schema:h})=>{const v=c({fields:f,modelName:p.name,schema:h});return()=>e(void 0,void 0,void 0,(function*(){try{s.dispatch(i,{event:o,data:{fields:v,id:l}},r,n);const e=yield t.query(p,l);if(!e)throw new Error(`${d}: ${l}`);const a=yield t.save(p.copyOf(e,(e=>{Object.assign(e,v)})));s.dispatch(i,{event:m,data:{fields:v,id:l,item:a}},r,n)}catch(e){s.dispatch(i,{event:m,data:{fields:v,id:l,errorMessage:a(e)}},r,n)}}))};export{f as useDataStoreUpdateAction};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _regeneratorRuntime from\"/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{View,useBreakpointValue}from\"@aws-amplify/ui-react\";import{FormularioLogin,FormularioLoginMobile,IlustracionLogin,Login,LoginMobile}from\"../../../ui-components\";import DesktopTemplate from\"../../base/desktop-template\";import MobileTemplate from\"../../base/mobile-template\";import{useNavigate}from\"react-router-dom\";import\"./login.css\";import{useEffect,useState}from\"react\";import store from\"../../../store/store\";import httpService from\"../../../shared/services/httpService\";import{constantesInterceptors}from\"../../../shared/constants/constants\";import{StoreConst}from\"../../../shared/constants/store\";import{Routes}from\"../../../shared/constants/routes\";import HashGen from\"../../../shared/utils/hash-gen\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function LoginApp(){var history=useNavigate();var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),inputValue=_useState2[0],setInputValue=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),inputValuePass=_useState4[0],setInputValuePass=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAlert=_useState6[0],setAlert=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isLoader=_useState8[0],setLoader=_useState8[1];useEffect(function(){store.dispatch({type:StoreConst.CLOSESESSION,payload:{}});},[]);var onChangeUser=function onChangeUser(e){setInputValue(e.target.value);};var onChangePass=function onChangePass(e){setInputValuePass(e.target.value);};var validSession=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e){return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:setLoader(true);httpService.execute(constantesInterceptors.postAuthToken,\"\",\"post\",{username:inputValue,password:inputValuePass}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(res){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:setLoader(false);if(!(res.statusCode==200)){_context.next=7;break;}_context.next=4;return store.dispatch({type:StoreConst.LOGIN,payload:{state:true,token:res.body,session_id:HashGen.createSessionId()}});case 4:history(Routes.HOME);_context.next=9;break;case 7:setAlert(true);setTimeout(function(){setAlert(false);},5000);case 9:case\"end\":return _context.stop();}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}()).catch(function(e){setAlert(true);setTimeout(function(){setAlert(false);},5000);});case 2:case\"end\":return _context2.stop();}},_callee2);}));return function validSession(_x){return _ref.apply(this,arguments);};}();var loginMobile=/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(View,{columnStart:\"1\",columnEnd:\"1\",margin:\"auto\",paddingTop:\"1rem\",children:/*#__PURE__*/_jsx(FormularioLoginMobile,{login:/*#__PURE__*/_jsx(LoginMobile,{className:\"login\",onchangeUser:onChangeUser,onChangePassword:onChangePass,validSession:validSession})})})});var loginDesktop=/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(View,{columnStart:\"1\",columnEnd:\"1\",margin:\"0 auto\",paddingTop:\"2rem\",height:\"fit-content\",children:/*#__PURE__*/_jsx(IlustracionLogin,{})}),/*#__PURE__*/_jsx(View,{columnStart:\"2\",columnEnd:\"-1\",paddingTop:\"2rem\",height:\"fit-content\",children:/*#__PURE__*/_jsx(FormularioLogin,{login:/*#__PURE__*/_jsx(Login,{className:\"login\",onchangeUser:onChangeUser,onChangePassword:onChangePass,validSession:validSession})})})]});var variation=useBreakpointValue([/*#__PURE__*/_jsx(MobileTemplate,{props:{content:loginMobile,alert:isAlert,loader:isLoader}}),/*#__PURE__*/ // small\n_jsx(MobileTemplate,{props:{content:loginMobile,alert:isAlert,loader:isLoader}}),/*#__PURE__*/ // medium\n_jsx(MobileTemplate,{props:{content:loginMobile,alert:isAlert,loader:isLoader}}),/*#__PURE__*/ // large\n_jsx(DesktopTemplate,{props:{content:loginDesktop,alert:isAlert,loader:isLoader}})// xl\n]);return/*#__PURE__*/_jsx(_Fragment,{children:variation});}export default LoginApp;","map":{"version":3,"names":["View","useBreakpointValue","FormularioLogin","FormularioLoginMobile","IlustracionLogin","Login","LoginMobile","DesktopTemplate","MobileTemplate","useNavigate","useEffect","useState","store","httpService","constantesInterceptors","StoreConst","Routes","HashGen","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","LoginApp","history","_useState","_useState2","_slicedToArray","inputValue","setInputValue","_useState3","_useState4","inputValuePass","setInputValuePass","_useState5","_useState6","isAlert","setAlert","_useState7","_useState8","isLoader","setLoader","dispatch","type","CLOSESESSION","payload","onChangeUser","e","target","value","onChangePass","validSession","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","wrap","_callee2$","_context2","prev","next","execute","postAuthToken","username","password","then","_ref2","_callee","res","_callee$","_context","statusCode","LOGIN","state","token","body","session_id","createSessionId","HOME","setTimeout","stop","_x2","apply","arguments","catch","_x","loginMobile","children","columnStart","columnEnd","margin","paddingTop","login","className","onchangeUser","onChangePassword","loginDesktop","height","variation","props","content","alert","loader"],"sources":["/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/src/pages/home/login/login.tsx"],"sourcesContent":["import { View, useBreakpointValue } from \"@aws-amplify/ui-react\";\nimport {\n  FormularioLogin,\n  FormularioLoginMobile,\n  IlustracionLogin,\n  Login,\n  LoginMobile,\n} from \"../../../ui-components\";\nimport DesktopTemplate from \"../../base/desktop-template\";\nimport MobileTemplate from \"../../base/mobile-template\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./login.css\";\nimport { useEffect, useState } from \"react\";\nimport store from \"../../../store/store\";\nimport httpService from \"../../../shared/services/httpService\";\nimport { constantesInterceptors } from \"../../../shared/constants/constants\";\nimport { StoreConst } from \"../../../shared/constants/store\";\nimport { Routes } from \"../../../shared/constants/routes\";\nimport HashGen from \"../../../shared/utils/hash-gen\";\n\nfunction LoginApp() {\n  const history = useNavigate();\n  const [inputValue, setInputValue] = useState(\"\");\n  const [inputValuePass, setInputValuePass] = useState(\"\");\n  const [isAlert, setAlert] = useState(false);\n  const [isLoader, setLoader] = useState(false);\n\n  useEffect(() => {\n    store.dispatch({\n      type: StoreConst.CLOSESESSION,\n      payload: {},\n    });\n  }, []);\n\n  var onChangeUser = (e: any) => {\n    setInputValue(e.target.value);\n  };\n\n  var onChangePass = (e: any) => {\n    setInputValuePass(e.target.value);\n  };\n\n  var validSession = async(e: any) => {\n\n    setLoader(true);\n    httpService\n      .execute(constantesInterceptors.postAuthToken, \"\", \"post\", {\n        username: inputValue,\n        password: inputValuePass,\n      })\n      .then(async (res: any) => {\n        setLoader(false);\n        if(res.statusCode == 200) {\n          await store.dispatch({\n            type: StoreConst.LOGIN,\n            payload: { \n              state: true,\n              token: res.body,\n              session_id: HashGen.createSessionId()\n            },\n          });\n    \n          history(Routes.HOME);\n        }\n        else {\n          setAlert(true);\n          setTimeout(()=>{\n            setAlert(false);\n          }, 5000);\n        }\n      })\n      .catch((e) => {\n        setAlert(true);\n        setTimeout(()=>{\n          setAlert(false);\n        }, 5000);\n      });\n  };\n\n  var loginMobile = ( <>\n      <View\n          columnStart=\"1\" \n          columnEnd=\"1\" \n          margin={\"auto\"}\n          paddingTop={\"1rem\"}\n      >\n          <FormularioLoginMobile login={\n            <LoginMobile\n              className=\"login\"\n              onchangeUser={onChangeUser}\n              onChangePassword={onChangePass}\n              validSession={validSession}\n            />\n          }/>\n      </View>\n    </>\n  );\n\n  var loginDesktop = ( <>\n      <View\n        columnStart=\"1\"\n        columnEnd=\"1\" \n        margin={\"0 auto\"}\n        paddingTop={\"2rem\"}\n        height={\"fit-content\"}\n      >\n        <IlustracionLogin />\n      </View>\n      <View\n        columnStart=\"2\"\n        columnEnd=\"-1\" \n        paddingTop={\"2rem\"}\n        height={\"fit-content\"}\n      >\n        <FormularioLogin login={\n          <Login\n            className=\"login\"\n            onchangeUser={onChangeUser}\n            onChangePassword={onChangePass}\n            validSession={validSession}\n          />\n        }></FormularioLogin>\n      </View>\n    </>\n  );\n\n  const variation = useBreakpointValue([\n    <MobileTemplate props={{content: loginMobile, alert: isAlert, loader: isLoader}}/>,     // small\n    <MobileTemplate props={{content: loginMobile, alert: isAlert, loader: isLoader}}/>,     // medium\n    <MobileTemplate props={{content: loginMobile, alert: isAlert, loader: isLoader}}/>,     // large\n    <DesktopTemplate props={{content: loginDesktop, alert: isAlert, loader: isLoader}}/>,   // xl\n  ]);\n\n  return (\n    <>\n      {variation}\n    </>\n  );\n}\n\nexport default LoginApp;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import _defineProperty from \"/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";\nimport _slicedToArray from \"/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport _regeneratorRuntime from \"/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport { __awaiter as t } from \"tslib\";\nimport { Hub as e } from \"aws-amplify\";\nimport { appendToCognitoUserAgent as n } from \"@aws-amplify/auth\";\nimport { waitFor as i } from \"xstate/lib/waitFor.js\";\nimport { ALLOWED_SPECIAL_CHARACTERS as a } from \"./constants.mjs\";\nimport { getActorState as o } from \"./actor.mjs\";\nimport { isFunction as s } from \"../../utils/index.mjs\";\nvar r = function r(_ref) {\n    var t = _ref.packageName,\n      e = _ref.version;\n    n(\"\".concat(t, \"/\").concat(e));\n  },\n  c = function c(t) {\n    var e = t.trim().split(\"\");\n    for (var _t = 0; _t < e.length; _t++) _t > 0 && _t < e.length - 1 && (e[_t] = \"*\");\n    return e.join(\"\");\n  },\n  l = function l(t) {\n    if (t.length < 4) return t;\n    var e = t.split(\"\");\n    for (var _t2 = 0; _t2 < e.length - 4; _t2++) e[_t2] = \"*\";\n    return e.join(\"\");\n  },\n  u = function u(e) {\n    return t(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n      return _regeneratorRuntime().wrap(function _callee$(_context) {\n        while (1) switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return i(e, function (t) {\n              return o(t).matches(\"autoSignIn\");\n            });\n          case 3:\n            _context.next = 7;\n            break;\n          case 5:\n            _context.prev = 5;\n            _context.t0 = _context[\"catch\"](0);\n          case 7:\n          case \"end\":\n            return _context.stop();\n        }\n      }, _callee, null, [[0, 5]]);\n    }));\n  },\n  m = function m(_ref2, i, a) {\n    var _ref2$payload = _ref2.payload,\n      e = _ref2$payload.data,\n      n = _ref2$payload.event;\n    return t(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee2() {\n      var t, r, _ref3, c, l, _n, _n2;\n      return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n        while (1) switch (_context2.prev = _context2.next) {\n          case 0:\n            t = i.send, r = i.getSnapshot(), _ref3 = null != a ? a : {}, c = _ref3.onSignIn, l = _ref3.onSignOut;\n            _context2.t0 = n;\n            _context2.next = _context2.t0 === \"tokenRefresh\" ? 4 : _context2.t0 === \"autoSignIn\" ? 6 : _context2.t0 === \"autoSignIn_failure\" ? 12 : _context2.t0 === \"signIn\" ? 17 : _context2.t0 === \"signOut\" ? 19 : _context2.t0 === \"tokenRefresh_failure\" ? 19 : 20;\n            break;\n          case 4:\n            r.matches(\"authenticated.idle\") && t(\"TOKEN_REFRESH\");\n            return _context2.abrupt(\"break\", 20);\n          case 6:\n            if (r.matches(\"authenticated\")) {\n              _context2.next = 11;\n              break;\n            }\n            _context2.next = 9;\n            return u(i);\n          case 9:\n            _n = o(i.getSnapshot());\n            (null == _n ? void 0 : _n.matches(\"autoSignIn\")) && t({\n              type: \"AUTO_SIGN_IN\",\n              data: e\n            });\n          case 11:\n            return _context2.abrupt(\"break\", 20);\n          case 12:\n            _context2.next = 14;\n            return u(i);\n          case 14:\n            _n2 = o(i.getSnapshot());\n            (null == _n2 ? void 0 : _n2.matches(\"autoSignIn\")) && t({\n              type: \"AUTO_SIGN_IN_FAILURE\",\n              data: e\n            });\n            return _context2.abrupt(\"break\", 20);\n          case 17:\n            s(c) && c();\n            return _context2.abrupt(\"break\", 20);\n          case 19:\n            s(l) && l(), r.matches(\"authenticated.idle\") && t(\"SIGN_OUT\");\n          case 20:\n          case \"end\":\n            return _context2.stop();\n        }\n      }, _callee2);\n    }));\n  },\n  d = function d(t) {\n    var n = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : m;\n    return e.listen(\"auth\", function (t, e) {\n      return function (n) {\n        e(n, t);\n      };\n    }(t, n), \"authenticator-hub-handler\");\n  },\n  h = function h(t) {\n    return a.some(function (e) {\n      return t.includes(e);\n    });\n  },\n  p = function p(t, e, n) {\n    return encodeURI(\"otpauth://totp/\".concat(t, \":\").concat(e, \"?secret=\").concat(n, \"&issuer=\").concat(t));\n  };\nfunction f(t) {\n  for (var _len = arguments.length, e = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n    e[_key - 1] = arguments[_key];\n  }\n  return Object.entries(t).reduce(function (t, _ref4) {\n    var _ref5 = _slicedToArray(_ref4, 2),\n      n = _ref5[0],\n      i = _ref5[1];\n    return Object.assign(Object.assign({}, t), _defineProperty({}, n, e.includes(n) ? i : null == i ? void 0 : i.trim()));\n  }, {});\n}\nexport { c as censorAllButFirstAndLast, l as censorPhoneNumber, r as configureComponent, m as defaultAuthHubHandler, p as getTotpCodeURL, h as hasSpecialChars, d as listenToAuthHub, f as trimValues };","map":{"version":3,"names":["__awaiter","t","Hub","e","appendToCognitoUserAgent","n","waitFor","i","ALLOWED_SPECIAL_CHARACTERS","a","getActorState","o","isFunction","s","r","_ref","packageName","version","concat","c","trim","split","length","join","l","u","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","matches","t0","stop","m","_ref2","_ref2$payload","payload","data","event","_callee2","_ref3","_n","_n2","_callee2$","_context2","send","getSnapshot","onSignIn","onSignOut","abrupt","type","d","arguments","undefined","listen","h","some","includes","p","encodeURI","f","_len","Array","_key","Object","entries","reduce","_ref4","_ref5","_slicedToArray","assign","_defineProperty","censorAllButFirstAndLast","censorPhoneNumber","configureComponent","defaultAuthHubHandler","getTotpCodeURL","hasSpecialChars","listenToAuthHub","trimValues"],"sources":["/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@aws-amplify/ui/dist/esm/helpers/authenticator/utils.mjs"],"sourcesContent":["import{__awaiter as t}from\"tslib\";import{Hub as e}from\"aws-amplify\";import{appendToCognitoUserAgent as n}from\"@aws-amplify/auth\";import{waitFor as i}from\"xstate/lib/waitFor.js\";import{ALLOWED_SPECIAL_CHARACTERS as a}from\"./constants.mjs\";import{getActorState as o}from\"./actor.mjs\";import{isFunction as s}from\"../../utils/index.mjs\";const r=({packageName:t,version:e})=>{n(`${t}/${e}`)},c=t=>{const e=t.trim().split(\"\");for(let t=0;t<e.length;t++)t>0&&t<e.length-1&&(e[t]=\"*\");return e.join(\"\")},l=t=>{if(t.length<4)return t;const e=t.split(\"\");for(let t=0;t<e.length-4;t++)e[t]=\"*\";return e.join(\"\")},u=e=>t(void 0,void 0,void 0,(function*(){try{yield i(e,(t=>o(t).matches(\"autoSignIn\")))}catch(t){}})),m=({payload:{data:e,event:n}},i,a)=>t(void 0,void 0,void 0,(function*(){const{send:t}=i,r=i.getSnapshot(),{onSignIn:c,onSignOut:l}=null!=a?a:{};switch(n){case\"tokenRefresh\":r.matches(\"authenticated.idle\")&&t(\"TOKEN_REFRESH\");break;case\"autoSignIn\":if(!r.matches(\"authenticated\")){yield u(i);const n=o(i.getSnapshot());(null==n?void 0:n.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN\",data:e})}break;case\"autoSignIn_failure\":{yield u(i);const n=o(i.getSnapshot());(null==n?void 0:n.matches(\"autoSignIn\"))&&t({type:\"AUTO_SIGN_IN_FAILURE\",data:e});break}case\"signIn\":s(c)&&c();break;case\"signOut\":case\"tokenRefresh_failure\":s(l)&&l(),r.matches(\"authenticated.idle\")&&t(\"SIGN_OUT\")}})),d=(t,n=m)=>e.listen(\"auth\",((t,e)=>n=>{e(n,t)})(t,n),\"authenticator-hub-handler\"),h=t=>a.some((e=>t.includes(e))),p=(t,e,n)=>encodeURI(`otpauth://totp/${t}:${e}?secret=${n}&issuer=${t}`);function f(t,...e){return Object.entries(t).reduce(((t,[n,i])=>Object.assign(Object.assign({},t),{[n]:e.includes(n)?i:null==i?void 0:i.trim()})),{})}export{c as censorAllButFirstAndLast,l as censorPhoneNumber,r as configureComponent,m as defaultAuthHubHandler,p as getTotpCodeURL,h as hasSpecialChars,d as listenToAuthHub,f as trimValues};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}
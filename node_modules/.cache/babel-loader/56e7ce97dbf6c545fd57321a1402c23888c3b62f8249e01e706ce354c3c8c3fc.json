{"ast":null,"code":"import _regeneratorRuntime from \"/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _slicedToArray from \"/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { __awaiter as e } from \"tslib\";\nimport t from \"qrcode\";\nimport * as o from \"react\";\nimport { Logger as r } from \"aws-amplify\";\nimport { authenticatorTextUtil as a, getTotpCodeURL as m } from \"@aws-amplify/ui\";\nimport { Flex as i } from \"../../../primitives/Flex/Flex.mjs\";\nimport { Heading as n } from \"../../../primitives/Heading/Heading.mjs\";\nimport { useAuthenticator as l } from \"@aws-amplify/ui-react-core\";\nimport { useCustomComponents as s } from \"../hooks/useCustomComponents/index.mjs\";\nimport { useFormHandlers as c } from \"../hooks/useFormHandlers/useFormHandlers.mjs\";\nimport { ConfirmSignInFooter as d } from \"../shared/ConfirmSignInFooter.mjs\";\nimport { RemoteErrorMessage as p } from \"../shared/RemoteErrorMessage.mjs\";\nimport { FormFields as u } from \"../shared/FormFields.mjs\";\nimport { RouteContainer as f } from \"../RouteContainer/RouteContainer.mjs\";\nvar g = new r(\"SetupTOTP-logger\"),\n  h = a.getSetupTOTPText,\n  E = a.getCopiedText,\n  v = a.getLoadingText,\n  C = function C(_ref) {\n    var r = _ref.className,\n      a = _ref.variation;\n    var n;\n    var _l = l(function (e) {\n        return [e.isPending, e.totpSecretCode];\n      }),\n      h = _l.totpSecretCode,\n      y = _l.isPending,\n      H = _l.user,\n      w = _l.QRFields,\n      _c = c(),\n      S = _c.handleChange,\n      F = _c.handleSubmit,\n      _s = s(),\n      _s$components$SetupTO = _s.components.SetupTOTP,\n      _s$components$SetupTO2 = _s$components$SetupTO.Header,\n      x = _s$components$SetupTO2 === void 0 ? C.Header : _s$components$SetupTO2,\n      _s$components$SetupTO3 = _s$components$SetupTO.Footer,\n      T = _s$components$SetupTO3 === void 0 ? C.Footer : _s$components$SetupTO3,\n      _o$useState = o.useState(!0),\n      _o$useState2 = _slicedToArray(_o$useState, 2),\n      j = _o$useState2[0],\n      V = _o$useState2[1],\n      _o$useState3 = o.useState(),\n      _o$useState4 = _slicedToArray(_o$useState3, 2),\n      b = _o$useState4[0],\n      P = _o$useState4[1],\n      _o$useState5 = o.useState(\"COPY\"),\n      _o$useState6 = _slicedToArray(_o$useState5, 2),\n      R = _o$useState6[0],\n      k = _o$useState6[1],\n      _ref2 = null !== (n = w) && void 0 !== n ? n : {},\n      _ref2$totpIssuer = _ref2.totpIssuer,\n      L = _ref2$totpIssuer === void 0 ? \"AWSCognito\" : _ref2$totpIssuer,\n      _ref2$totpUsername = _ref2.totpUsername,\n      M = _ref2$totpUsername === void 0 ? null == H ? void 0 : H.username : _ref2$totpUsername,\n      O = o.useCallback(function () {\n        return e(void 0, void 0, void 0, /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n          var _e, _o;\n          return _regeneratorRuntime().wrap(function _callee$(_context) {\n            while (1) switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                _e = m(L, M, h);\n                _context.next = 4;\n                return t.toDataURL(_e);\n              case 4:\n                _o = _context.sent;\n                P(_o);\n                _context.next = 11;\n                break;\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                g.error(_context.t0);\n              case 11:\n                _context.prev = 11;\n                V(!1);\n                return _context.finish(11);\n              case 14:\n              case \"end\":\n                return _context.stop();\n            }\n          }, _callee, null, [[0, 8, 11, 14]]);\n        }));\n      }, [L, M, h]);\n    o.useEffect(function () {\n      b || O();\n    }, [O, b]);\n    return o.createElement(f, {\n      className: r,\n      variation: a\n    }, o.createElement(\"form\", {\n      \"data-amplify-form\": \"\",\n      \"data-amplify-authenticator-setup-totp\": \"\",\n      method: \"post\",\n      onChange: S,\n      onSubmit: F\n    }, o.createElement(i, {\n      as: \"fieldset\",\n      direction: \"column\",\n      isDisabled: y\n    }, o.createElement(x, null), o.createElement(i, {\n      direction: \"column\"\n    }, j ? o.createElement(\"p\", null, v(), \"…\") : o.createElement(\"img\", {\n      \"data-amplify-qrcode\": !0,\n      src: b,\n      alt: \"qr code\",\n      width: \"228\",\n      height: \"228\"\n    }), o.createElement(i, {\n      \"data-amplify-copy\": !0\n    }, o.createElement(\"div\", null, h), o.createElement(i, {\n      \"data-amplify-copy-svg\": !0,\n      onClick: function onClick() {\n        navigator.clipboard.writeText(h), k(E());\n      }\n    }, o.createElement(\"div\", {\n      \"data-amplify-copy-tooltip\": !0\n    }, R), o.createElement(\"svg\", {\n      width: \"24\",\n      height: \"24\",\n      viewBox: \"0 0 24 24\",\n      xmlns: \"http://www.w3.org/2000/svg\"\n    }, o.createElement(\"path\", {\n      d: \"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"\n    })))), o.createElement(u, null), o.createElement(p, null)), o.createElement(d, null), o.createElement(T, null))));\n  };\nC.Header = function () {\n  return o.createElement(n, {\n    level: 3\n  }, h());\n}, C.Footer = function () {\n  return null;\n};\nexport { C as SetupTOTP };","map":{"version":3,"names":["__awaiter","e","t","o","Logger","r","authenticatorTextUtil","a","getTotpCodeURL","m","Flex","i","Heading","n","useAuthenticator","l","useCustomComponents","s","useFormHandlers","c","ConfirmSignInFooter","d","RemoteErrorMessage","p","FormFields","u","RouteContainer","f","g","h","getSetupTOTPText","E","getCopiedText","v","getLoadingText","C","_ref","className","variation","_l","isPending","totpSecretCode","y","H","user","w","QRFields","_c","S","handleChange","F","handleSubmit","_s","_s$components$SetupTO","components","SetupTOTP","_s$components$SetupTO2","Header","x","_s$components$SetupTO3","Footer","T","_o$useState","useState","_o$useState2","_slicedToArray","j","V","_o$useState3","_o$useState4","b","P","_o$useState5","_o$useState6","R","k","_ref2","_ref2$totpIssuer","totpIssuer","L","_ref2$totpUsername","totpUsername","M","username","O","useCallback","_regeneratorRuntime","mark","_callee","_e","_o","wrap","_callee$","_context","prev","next","toDataURL","sent","t0","error","finish","stop","useEffect","createElement","method","onChange","onSubmit","as","direction","isDisabled","src","alt","width","height","onClick","navigator","clipboard","writeText","viewBox","xmlns","level"],"sources":["/Users/nicolasarchila/Documents/Arquitectura/amplify/juanv2/react-amplify-poc/node_modules/@aws-amplify/ui-react/dist/esm/components/Authenticator/SetupTOTP/SetupTOTP.mjs"],"sourcesContent":["import{__awaiter as e}from\"tslib\";import t from\"qrcode\";import*as o from\"react\";import{Logger as r}from\"aws-amplify\";import{authenticatorTextUtil as a,getTotpCodeURL as m}from\"@aws-amplify/ui\";import{Flex as i}from\"../../../primitives/Flex/Flex.mjs\";import{Heading as n}from\"../../../primitives/Heading/Heading.mjs\";import{useAuthenticator as l}from\"@aws-amplify/ui-react-core\";import{useCustomComponents as s}from\"../hooks/useCustomComponents/index.mjs\";import{useFormHandlers as c}from\"../hooks/useFormHandlers/useFormHandlers.mjs\";import{ConfirmSignInFooter as d}from\"../shared/ConfirmSignInFooter.mjs\";import{RemoteErrorMessage as p}from\"../shared/RemoteErrorMessage.mjs\";import{FormFields as u}from\"../shared/FormFields.mjs\";import{RouteContainer as f}from\"../RouteContainer/RouteContainer.mjs\";const g=new r(\"SetupTOTP-logger\"),{getSetupTOTPText:h,getCopiedText:E,getLoadingText:v}=a,C=({className:r,variation:a})=>{var n;const{totpSecretCode:h,isPending:y,user:H,QRFields:w}=l((e=>[e.isPending,e.totpSecretCode])),{handleChange:S,handleSubmit:F}=c(),{components:{SetupTOTP:{Header:x=C.Header,Footer:T=C.Footer}}}=s(),[j,V]=o.useState(!0),[b,P]=o.useState(),[R,k]=o.useState(\"COPY\"),{totpIssuer:L=\"AWSCognito\",totpUsername:M=(null==H?void 0:H.username)}=null!==(n=w)&&void 0!==n?n:{},O=o.useCallback((()=>e(void 0,void 0,void 0,(function*(){try{const e=m(L,M,h),o=yield t.toDataURL(e);P(o)}catch(e){g.error(e)}finally{V(!1)}}))),[L,M,h]);o.useEffect((()=>{b||O()}),[O,b]);return o.createElement(f,{className:r,variation:a},o.createElement(\"form\",{\"data-amplify-form\":\"\",\"data-amplify-authenticator-setup-totp\":\"\",method:\"post\",onChange:S,onSubmit:F},o.createElement(i,{as:\"fieldset\",direction:\"column\",isDisabled:y},o.createElement(x,null),o.createElement(i,{direction:\"column\"},j?o.createElement(\"p\",null,v(),\"…\"):o.createElement(\"img\",{\"data-amplify-qrcode\":!0,src:b,alt:\"qr code\",width:\"228\",height:\"228\"}),o.createElement(i,{\"data-amplify-copy\":!0},o.createElement(\"div\",null,h),o.createElement(i,{\"data-amplify-copy-svg\":!0,onClick:()=>{navigator.clipboard.writeText(h),k(E())}},o.createElement(\"div\",{\"data-amplify-copy-tooltip\":!0},R),o.createElement(\"svg\",{width:\"24\",height:\"24\",viewBox:\"0 0 24 24\",xmlns:\"http://www.w3.org/2000/svg\"},o.createElement(\"path\",{d:\"M16 1H4C2.9 1 2 1.9 2 3V17H4V3H16V1ZM15 5H8C6.9 5 6.01 5.9 6.01 7L6 21C6 22.1 6.89 23 7.99 23H19C20.1 23 21 22.1 21 21V11L15 5ZM8 21V7H14V12H19V21H8Z\"})))),o.createElement(u,null),o.createElement(p,null)),o.createElement(d,null),o.createElement(T,null))))};C.Header=function(){return o.createElement(n,{level:3},h())},C.Footer=function(){return null};export{C as SetupTOTP};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}